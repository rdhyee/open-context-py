{% block chrono_chart %}
{% load humanize %}

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Chronological Distribution (Years BCE/CE)</h3>
    </div>
    <div class="panel-body">
        <div class="row">
			<div class="col-xs-11">
                <div id="chrono-chart-wrapper">
                    <canvas id="chrono-chart"></canvas>
                </div>
            </div>
            <div class="col-xs-1">
            
            </div>
        </div>
        <div class="row">
			<div class="col-xs-11">
                
            </div>
            <div class="col-xs-1">
                <div id="chrono-info-wrapper">
                    <button type="button" class="btn btn-sm btn-default"
                            id="chrono-info-popover"
                            data-toggle="popover"
                            title="About the Chronology Chart"
                            data-content="This chart shows the distribution search records in different time-spans. Some records (like archaeological sites) may have multiple time-spans. Use the slider below the chart to select a range of dates, then click the filter button below to limit the selection.">
                        <span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="panel-footer" id="chrono-controls">
        
    </div>
</div>

<!--
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.1/Chart.bundle.min.js"></script>
-->
<script type="text/javascript" src="{{ base_url }}/static/chart/Chart.bundle.min.js"></script>
<script type="text/javascript" src="{{ base_url }}/static/oc/js/datavis/chrono-chart.js"></script>
<script type="text/javascript" src="{{ base_url }}/static/bootstrap-slider/bootstrap-slider.min.js"></script>
<link rel="stylesheet" type="text/css" href="{{ base_url }}/static/bootstrap-slider/css/bootstrap-slider.min.css" />
<style type="text/css">
    #chrono-chart-wrapper {
        margin-right:-15px;
    }
    #chrono-controls .slider-selection {
        background: #81bfde;
    }
    #chrono-info-wrapper {
        margin-top: -26px;
    }
    #chrono-info-wrapper button {
        /*
        position: absolute;
        bottom: 0;
        */
    }
    div.popover {
        min-width: 300px;
    }
</style>

<script>
    $('#chrono-info-popover').popover({placement: 'top'});
    var ctx = document.getElementById("chrono-chart");
    var chrono = new chrono_chart("chrono-chart", "{{ json_url|safe }}");
    chrono.initialize();
</script>

{% endblock %}